<div class="row">
  <h3>Perfil</h3>
</div>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <% if devise_error_messages? %>
    <div class="row">
      <div class="card-panel red lighten-3">
        <%= devise_error_messages! %>
      </div>
    </div>
  <% end %>

  <div class="row">
    <div class="col s12 input-field">
      <label class = "active" for="user">Correo</label>
      <%= f.email_field :email %>
    </div>
  </div>

  <div class="row">
    <div class="col s12 input-field">
      <%= f.password_field :password, autocomplete: "off" %>
      <label>Nueva contraseña</label>
    </div>
  </div>

  <div class="row">
    <div class="col s12 input-field">
      <%= f.password_field :password_confirmation, autocomplete: "off" %>
      <label>Confirmación contraseña</label>
    </div>
  </div>

  <div class="row">
    <div class="col s12 input-field">
      <%= f.password_field :current_password, autocomplete: "off" %>
      <label>Contraseña actual</label>
    </div>
  </div>

  <div class="row right">
    <div class="actions">
      <%= link_to "Cancelar", '/admin/home' , :class => 'btn waves-effect waves-light'%>
      <%= f.submit "Actualizar", :class => 'btn waves-effect waves-light'%>
    </div>
  </div>
<% end %>
<script>
  $(document).ready(function() {
     DependentFields.bind()
  });
  $("#edit_admin").validate({
    rules: {
      'admin[email]': {
          required: true,
          email: true
      },
      'admin[password]': {
        required: true
      },
      'admin[password_confirmation]': {
        required: true
      },
      'admin[current_password]': {
        required: true
      },
    },
    messages: {
      'admin[email]':{
        required: "Campo obligatorio",
        email: "Se requiere un correo válido"
      },
      'admin[password]': {
        required: "Campo obligatorio"
      },
      'admin[password_confirmation]': {
        required: "Campo obligatorio"
      },
      'admin[current_password]': {
        required: "Campo obligatorio"
      },
    },
    errorElement : 'div',
    errorPlacement: function(error, element) {
      var placement = $(element).data('error');
      if (placement) {
        $(placement).append(error)
      } else {
        error.insertAfter(element);
      }
    }
  });
</script>